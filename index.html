<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê¥ Horse Ranch Math Adventure! üê¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #87CEEB 0%, #90EE90 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(45deg, #FF6B6B, #4ECDC4);
            color: white;
            text-align: center;
            padding: 30px;
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: 'üêé';
            position: absolute;
            font-size: 3em;
            animation: bounce 2s infinite;
            left: 50px;
            top: 20px;
        }

        .header::after {
            content: 'üèá';
            position: absolute;
            font-size: 3em;
            animation: bounce 2s infinite 0.5s;
            right: 50px;
            top: 20px;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .nav-tabs {
            display: flex;
            background: #f0f0f0;
            border-bottom: 3px solid #4ECDC4;
        }

        .tab {
            flex: 1;
            padding: 15px;
            background: #e0e0e0;
            border: none;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .tab:hover {
            background: #d0d0d0;
            transform: translateY(-2px);
        }

        .tab.active {
            background: #4ECDC4;
            color: white;
            transform: translateY(-3px);
        }

        .content {
            padding: 30px;
            min-height: 400px;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .formula-box {
            background: linear-gradient(45deg, #FFE066, #FF9A9E);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 3px dashed #FF6B6B;
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .formula-box::before {
            content: '‚ú®';
            position: absolute;
            top: 10px;
            left: 20px;
            animation: sparkle 1.5s infinite;
        }

        .formula-box::after {
            content: '‚ú®';
            position: absolute;
            top: 10px;
            right: 20px;
            animation: sparkle 1.5s infinite 0.7s;
        }

        @keyframes sparkle {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.3; transform: scale(1.2); }
        }

        .example-box {
            background: #E8F8F5;
            border-left: 5px solid #4ECDC4;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .quiz-container {
            background: #FFF3CD;
            border: 2px solid #FFC107;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            position: relative;
        }

        .quiz-container::before {
            content: 'ü§î';
            position: absolute;
            top: -15px;
            left: 20px;
            background: #FFC107;
            padding: 10px;
            border-radius: 50%;
            font-size: 1.5em;
        }

        .question {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #856404;
        }

        .options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 20px 0;
        }

        .option {
            background: #FFFFFF;
            border: 2px solid #4ECDC4;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .option:hover {
            background: #4ECDC4;
            color: white;
            transform: scale(1.05);
        }

        .option.correct {
            background: #28A745;
            color: white;
            animation: correctAnswer 0.6s ease;
        }

        .option.incorrect {
            background: #DC3545;
            color: white;
            animation: shake 0.5s ease;
        }

        @keyframes correctAnswer {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .calculator {
            background: #F8F9FA;
            border: 2px solid #6C757D;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .calculator input {
            width: 80px;
            padding: 8px;
            margin: 5px;
            border: 2px solid #4ECDC4;
            border-radius: 5px;
            text-align: center;
            font-size: 1.1em;
        }

        .calc-button {
            background: #4ECDC4;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: bold;
            margin: 10px 5px;
            transition: all 0.3s;
        }

        .calc-button:hover {
            background: #45B7AA;
            transform: translateY(-2px);
        }

        .result {
            background: #D4EDDA;
            border: 2px solid #28A745;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            display: none;
        }

        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            max-width: 400px;
            margin: 20px auto;
        }

        .memory-card {
            background: #4ECDC4;
            border: none;
            border-radius: 10px;
            padding: 20px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            min-height: 80px;
        }

        .memory-card:hover {
            background: #45B7AA;
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: #FFE066;
            color: #333;
        }

        .memory-card.matched {
            background: #28A745;
            color: white;
        }

        .score {
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
            color: #4ECDC4;
            margin: 20px 0;
        }

        .encouragement {
            text-align: center;
            font-size: 1.3em;
            color: #FF6B6B;
            font-weight: bold;
            margin: 20px 0;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .fun-fact {
            background: linear-gradient(45deg, #FFB6C1, #FFE4E1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            border: 2px dashed #FF69B4;
            position: relative;
        }

        .fun-fact::before {
            content: 'ü§ì';
            position: absolute;
            top: -15px;
            left: 20px;
            background: #FF69B4;
            padding: 8px;
            border-radius: 50%;
            font-size: 1.2em;
        }

        .interactive-demo {
            background: #E3F2FD;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .shape-demo {
            width: 200px;
            height: 150px;
            margin: 20px auto;
            border: 3px solid #2196F3;
            border-radius: 10px;
            background: rgba(33, 150, 243, 0.1);
            transition: all 0.3s;
            position: relative;
            cursor: pointer;
        }

        .shape-demo:hover {
            background: rgba(33, 150, 243, 0.3);
            transform: scale(1.1);
        }

        .shape-info {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: #2196F3;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>üê¥ Horse Ranch Math Adventure! üê¥</h1>
            <p>Learn Area, Perimeter & Volume with your horse friends!</p>
        </header>

        <nav class="nav-tabs">
            <button class="tab active" onclick="showSection('perimeter')">üèÉ‚Äç‚ôÄÔ∏è Perimeter</button>
            <button class="tab" onclick="showSection('area')">üè† Area</button>
            <button class="tab" onclick="showSection('volume')">üì¶ Volume</button>
            <button class="tab" onclick="showSection('games')">üéÆ Games</button>
        </nav>

        <div class="content">
            <!-- PERIMETER SECTION -->
            <div id="perimeter" class="section active">
                <h2>üèÉ‚Äç‚ôÄÔ∏è Perimeter - Going Around the Edge!</h2>
                <p><strong>Perimeter = the distance around the outside edge of a shape</strong></p>
                <p>Think of it like galloping around a fence - you're measuring how far you gallop! üêé</p>

                <div class="formula-box">
                    <strong>Rectangle:</strong> P = 2 √ó (length + width)<br>
                    <strong>Square:</strong> P = 4 √ó side<br>
                    <strong>Triangle:</strong> P = side‚ÇÅ + side‚ÇÇ + side‚ÇÉ<br>
                    <strong>Circle:</strong> P = 2 √ó œÄ √ó radius (œÄ ‚âà 3.14)<br>
                    <strong>Regular Polygon:</strong> P = number of sides √ó side length
                </div>

                <div class="example-box">
                    <strong>üê¥ Rectangle - Starlight's Paddock:</strong><br>
                    20m long and 15m wide: P = 2 √ó (20 + 15) = 70m<br><br>
                    
                    <strong>üê¥ Square - Thunder's Stable:</strong><br>
                    Each side is 8m: P = 4 √ó 8 = 32m<br><br>
                    
                    <strong>üê¥ Triangle - Spirit's Training Area:</strong><br>
                    Sides: 12m, 15m, 18m: P = 12 + 15 + 18 = 45m<br><br>
                    
                    <strong>üê¥ Circle - Moonbeam's Round Pen:</strong><br>
                    Radius 10m: P = 2 √ó 3.14 √ó 10 = 62.8m
                </div>

                <div class="calculator">
                    <h3>üßÆ Multi-Shape Perimeter Calculator</h3>
                    <label>Shape: 
                        <select id="perimShape" onchange="updatePerimeterInputs()">
                            <option value="rectangle">Rectangle</option>
                            <option value="square">Square</option>
                            <option value="triangle">Triangle</option>
                            <option value="circle">Circle</option>
                            <option value="hexagon">Regular Hexagon</option>
                        </select>
                    </label>
                    <div id="perimInputs">
                        <label>Length: <input type="number" id="perimLength" placeholder="20"></label>
                        <label>Width: <input type="number" id="perimWidth" placeholder="15"></label>
                    </div>
                    <button class="calc-button" onclick="calculatePerimeter()">Calculate Perimeter!</button>
                    <div id="perimResult" class="result"></div>
                </div>

                <div class="quiz-container">
                    <div class="question" id="perimQuizQuestion">Thunder's square stable has sides of 8m. What's the perimeter?</div>
                    <div class="options" id="perimQuizOptions">
                        <div class="option" onclick="checkAnswer(this, false)">16m</div>
                        <div class="option" onclick="checkAnswer(this, true)">32m</div>
                        <div class="option" onclick="checkAnswer(this, false)">24m</div>
                        <div class="option" onclick="checkAnswer(this, false)">64m</div>
                    </div>
                    <button class="calc-button" onclick="generatePerimeterQuiz()">New Question!</button>
                </div>

                <div class="fun-fact">
                    <h4>Fun Facts!</h4>
                    ‚Ä¢ A football field perimeter is about 400m! üèüÔ∏è<br>
                    ‚Ä¢ The Earth's equator (biggest circle) is 40,075km around! üåç<br>
                    ‚Ä¢ A regular hexagon (like a stop sign) has 6 equal sides! üõë
                </div>
            </div>

            <!-- AREA SECTION -->
            <div id="area" class="section">
                <h2>üè† Area - Covering the Surface!</h2>
                <p><strong>Area = how much space inside a shape</strong></p>
                <p>Think of it like putting hay on the ground - how much hay do you need to cover the space? üåæ</p>

                <div class="formula-box">
                    <strong>Rectangle:</strong> A = length √ó width<br>
                    <strong>Square:</strong> A = side √ó side = side¬≤<br>
                    <strong>Triangle:</strong> A = ¬Ω √ó base √ó height<br>
                    <strong>Circle:</strong> A = œÄ √ó radius¬≤ (œÄ ‚âà 3.14)<br>
                    <strong>Trapezoid:</strong> A = ¬Ω √ó (top + bottom) √ó height<br>
                    <strong>Parallelogram:</strong> A = base √ó height
                </div>

                <div class="example-box">
                    <strong>üê¥ Rectangle - Moonbeam's Pasture:</strong><br>
                    30m √ó 20m: A = 30 √ó 20 = 600m¬≤<br><br>
                    
                    <strong>üê¥ Square - Thunder's Pen:</strong><br>
                    Side = 12m: A = 12¬≤ = 144m¬≤<br><br>
                    
                    <strong>üê¥ Triangle - Blaze's Training Corner:</strong><br>
                    Base = 16m, Height = 10m: A = ¬Ω √ó 16 √ó 10 = 80m¬≤<br><br>
                    
                    <strong>üê¥ Circle - Spirit's Round Arena:</strong><br>
                    Radius = 15m: A = 3.14 √ó 15¬≤ = 706.5m¬≤<br><br>
                    
                    <strong>üê¥ L-Shaped - Dakota's Complex Pasture:</strong><br>
                    Main area (25√ó15) + Extension (10√ó8) = 375 + 80 = 455m¬≤
                </div>

                <div class="calculator">
                    <h3>üßÆ Multi-Shape Area Calculator</h3>
                    <label>Shape: 
                        <select id="areaShape" onchange="updateAreaInputs()">
                            <option value="rectangle">Rectangle</option>
                            <option value="square">Square</option>
                            <option value="triangle">Triangle</option>
                            <option value="circle">Circle</option>
                            <option value="trapezoid">Trapezoid</option>
                            <option value="lshape">L-Shape</option>
                        </select>
                    </label>
                    <div id="areaInputs">
                        <label>Length: <input type="number" id="areaLength" placeholder="30"></label>
                        <label>Width: <input type="number" id="areaWidth" placeholder="20"></label>
                    </div>
                    <button class="calc-button" onclick="calculateArea()">Calculate Area!</button>
                    <div id="areaResult" class="result"></div>
                </div>

                <div class="quiz-container">
                    <div class="question" id="areaQuizQuestion">Spirit's square pen has an area of 64m¬≤. What's the length of each side?</div>
                    <div class="options" id="areaQuizOptions">
                        <div class="option" onclick="checkAnswer(this, true)">8m</div>
                        <div class="option" onclick="checkAnswer(this, false)">16m</div>
                        <div class="option" onclick="checkAnswer(this, false)">32m</div>
                        <div class="option" onclick="checkAnswer(this, false)">4m</div>
                    </div>
                    <button class="calc-button" onclick="generateAreaQuiz()">New Question!</button>
                </div>

                <div class="fun-fact">
                    <h4>Fun Facts!</h4>
                    ‚Ä¢ A football field has an area of about 5,400m¬≤! ‚öΩ<br>
                    ‚Ä¢ The largest pizza ever made was 1,261m¬≤! üçï<br>
                    ‚Ä¢ A triangle's area is always half of a rectangle with the same base and height! üìê
                </div>
            </div>

            <!-- VOLUME SECTION -->
            <div id="volume" class="section">
                <h2>üì¶ Volume - Filling Up Space!</h2>
                <p><strong>Volume = how much space inside a 3D object</strong></p>
                <p>Think of it like filling a stable with hay bales - how many bales fit inside? üì¶</p>

                <div class="formula-box">
                    <strong>Rectangular Prism:</strong> V = length √ó width √ó height<br>
                    <strong>Cube:</strong> V = edge¬≥<br>
                    <strong>Cylinder:</strong> V = œÄ √ó radius¬≤ √ó height<br>
                    <strong>Triangular Prism:</strong> V = ¬Ω √ó base √ó height √ó length<br>
                    <strong>Sphere:</strong> V = ‚Å¥‚ÅÑ‚ÇÉ √ó œÄ √ó radius¬≥<br>
                    <strong>Cone:</strong> V = ‚Öì √ó œÄ √ó radius¬≤ √ó height
                </div>

                <div class="example-box">
                    <strong>üê¥ Rectangular Prism - Blaze's Hay Barn:</strong><br>
                    15m √ó 10m √ó 6m: V = 15 √ó 10 √ó 6 = 900m¬≥<br><br>
                    
                    <strong>üê¥ Cube - Thunder's Feed Container:</strong><br>
                    Edge = 4m: V = 4¬≥ = 64m¬≥<br><br>
                    
                    <strong>üê¥ Cylinder - Spirit's Water Tank:</strong><br>
                    Radius = 3m, Height = 8m: V = 3.14 √ó 3¬≤ √ó 8 = 226.08m¬≥<br><br>
                    
                    <strong>üê¥ Triangular Prism - Moonbeam's Shelter:</strong><br>
                    Base = 6m, Height = 4m, Length = 10m: V = ¬Ω √ó 6 √ó 4 √ó 10 = 120m¬≥<br><br>
                    
                    <strong>üê¥ Sphere - Dakota's Exercise Ball:</strong><br>
                    Radius = 2m: V = ‚Å¥‚ÅÑ‚ÇÉ √ó 3.14 √ó 2¬≥ = 33.49m¬≥
                </div>

                <div class="calculator">
                    <h3>üßÆ Multi-Shape Volume Calculator</h3>
                    <label>Shape: 
                        <select id="volumeShape" onchange="updateVolumeInputs()">
                            <option value="rectangular">Rectangular Prism</option>
                            <option value="cube">Cube</option>
                            <option value="cylinder">Cylinder</option>
                            <option value="triangular">Triangular Prism</option>
                            <option value="sphere">Sphere</option>
                            <option value="cone">Cone</option>
                        </select>
                    </label>
                    <div id="volumeInputs">
                        <label>Length: <input type="number" id="volLength" placeholder="15"></label>
                        <label>Width: <input type="number" id="volWidth" placeholder="10"></label>
                        <label>Height: <input type="number" id="volHeight" placeholder="6"></label>
                    </div>
                    <button class="calc-button" onclick="calculateVolume()">Calculate Volume!</button>
                    <div id="volResult" class="result"></div>
                </div>

                <div class="quiz-container">
                    <div class="question" id="volumeQuizQuestion">A cube-shaped feed container has edges of 4m. What's its volume?</div>
                    <div class="options" id="volumeQuizOptions">
                        <div class="option" onclick="checkAnswer(this, false)">16m¬≥</div>
                        <div class="option" onclick="checkAnswer(this, false)">48m¬≥</div>
                        <div class="option" onclick="checkAnswer(this, true)">64m¬≥</div>
                        <div class="option" onclick="checkAnswer(this, false)">12m¬≥</div>
                    </div>
                    <button class="calc-button" onclick="generateVolumeQuiz()">New Question!</button>
                </div>

                <div class="fun-fact">
                    <h4>Fun Facts!</h4>
                    ‚Ä¢ An average horse stable is about 100m¬≥! üè†<br>
                    ‚Ä¢ A cylinder (like a silo) can hold more than a box with the same base! üåæ<br>
                    ‚Ä¢ A sphere holds the most volume for its surface area! ‚öΩ<br>
                    ‚Ä¢ The Great Pyramid has a volume of 2.6 million m¬≥! üè∫
                </div>
            </div>

            <!-- GAMES SECTION -->
            <div id="games" class="section">
                <h2>üéÆ Math Games!</h2>
                
                <div class="quiz-container">
                    <h3>üß† Formula Memory Match!</h3>
                    <p>Match the formulas with their shapes!</p>
                    <div class="memory-game" id="memoryGame">
                        <!-- Cards will be generated by JavaScript -->
                    </div>
                    <div class="score" id="memoryScore">Matches: 0 | Tries: 0</div>
                    <button class="calc-button" onclick="resetMemoryGame()">New Game!</button>
                </div>

                <div class="quiz-container">
                    <h3>üèá Quick Quiz Challenge!</h3>
                    <div id="quickQuiz">
                        <div class="question" id="quizQuestion">Loading question...</div>
                        <div class="options" id="quizOptions">
                            <!-- Options will be generated by JavaScript -->
                        </div>
                        <div class="score" id="quizScore">Score: 0 | Question: 1</div>
                    </div>
                    <button class="calc-button" onclick="generateQuizQuestion()">Next Question!</button>
                </div>

                <div class="encouragement" id="encouragement">
                    üåü You're doing amazing! Keep practicing! üåü
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentScore = 0;
        let currentQuestion = 1;
        let memoryMatches = 0;
        let memoryTries = 0;
        let memoryFlippedCards = [];

        // Show section function
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => section.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected section
            document.getElementById(sectionName).classList.add('active');
            
            // Add active class to selected tab
            event.target.classList.add('active');
        }

        // Calculator functions
        function updatePerimeterInputs() {
            const shape = document.getElementById('perimShape').value;
            const inputsDiv = document.getElementById('perimInputs');
            
            switch(shape) {
                case 'rectangle':
                    inputsDiv.innerHTML = `
                        <label>Length: <input type="number" id="perimLength" placeholder="20"></label>
                        <label>Width: <input type="number" id="perimWidth" placeholder="15"></label>
                    `;
                    break;
                case 'square':
                    inputsDiv.innerHTML = `
                        <label>Side: <input type="number" id="perimSide" placeholder="8"></label>
                    `;
                    break;
                case 'triangle':
                    inputsDiv.innerHTML = `
                        <label>Side 1: <input type="number" id="perimSide1" placeholder="12"></label>
                        <label>Side 2: <input type="number" id="perimSide2" placeholder="15"></label>
                        <label>Side 3: <input type="number" id="perimSide3" placeholder="18"></label>
                    `;
                    break;
                case 'circle':
                    inputsDiv.innerHTML = `
                        <label>Radius: <input type="number" id="perimRadius" placeholder="10"></label>
                    `;
                    break;
                case 'hexagon':
                    inputsDiv.innerHTML = `
                        <label>Side Length: <input type="number" id="perimSide" placeholder="5"></label>
                    `;
                    break;
            }
        }

        function updateAreaInputs() {
            const shape = document.getElementById('areaShape').value;
            const inputsDiv = document.getElementById('areaInputs');
            
            switch(shape) {
                case 'rectangle':
                    inputsDiv.innerHTML = `
                        <label>Length: <input type="number" id="areaLength" placeholder="30"></label>
                        <label>Width: <input type="number" id="areaWidth" placeholder="20"></label>
                    `;
                    break;
                case 'square':
                    inputsDiv.innerHTML = `
                        <label>Side: <input type="number" id="areaSide" placeholder="12"></label>
                    `;
                    break;
                case 'triangle':
                    inputsDiv.innerHTML = `
                        <label>Base: <input type="number" id="areaBase" placeholder="16"></label>
                        <label>Height: <input type="number" id="areaHeight" placeholder="10"></label>
                    `;
                    break;
                case 'circle':
                    inputsDiv.innerHTML = `
                        <label>Radius: <input type="number" id="areaRadius" placeholder="15"></label>
                    `;
                    break;
                case 'trapezoid':
                    inputsDiv.innerHTML = `
                        <label>Top: <input type="number" id="areaTop" placeholder="8"></label>
                        <label>Bottom: <input type="number" id="areaBottom" placeholder="12"></label>
                        <label>Height: <input type="number" id="areaHeight" placeholder="6"></label>
                    `;
                    break;
                case 'lshape':
                    inputsDiv.innerHTML = `
                        <label>Main Length: <input type="number" id="areaLength1" placeholder="25"></label>
                        <label>Main Width: <input type="number" id="areaWidth1" placeholder="15"></label>
                        <label>Extension Length: <input type="number" id="areaLength2" placeholder="10"></label>
                        <label>Extension Width: <input type="number" id="areaWidth2" placeholder="8"></label>
                    `;
                    break;
            }
        }

        function updateVolumeInputs() {
            const shape = document.getElementById('volumeShape').value;
            const inputsDiv = document.getElementById('volumeInputs');
            
            switch(shape) {
                case 'rectangular':
                    inputsDiv.innerHTML = `
                        <label>Length: <input type="number" id="volLength" placeholder="15"></label>
                        <label>Width: <input type="number" id="volWidth" placeholder="10"></label>
                        <label>Height: <input type="number" id="volHeight" placeholder="6"></label>
                    `;
                    break;
                case 'cube':
                    inputsDiv.innerHTML = `
                        <label>Edge: <input type="number" id="volEdge" placeholder="4"></label>
                    `;
                    break;
                case 'cylinder':
                    inputsDiv.innerHTML = `
                        <label>Radius: <input type="number" id="volRadius" placeholder="3"></label>
                        <label>Height: <input type="number" id="volHeight" placeholder="8"></label>
                    `;
                    break;
                case 'triangular':
                    inputsDiv.innerHTML = `
                        <label>Base: <input type="number" id="volBase" placeholder="6"></label>
                        <label>Height: <input type="number" id="volHeight" placeholder="4"></label>
                        <label>Length: <input type="number" id="volLength" placeholder="10"></label>
                    `;
                    break;
                case 'sphere':
                    inputsDiv.innerHTML = `
                        <label>Radius: <input type="number" id="volRadius" placeholder="2"></label>
                    `;
                    break;
                case 'cone':
                    inputsDiv.innerHTML = `
                        <label>Radius: <input type="number" id="volRadius" placeholder="3"></label>
                        <label>Height: <input type="number" id="volHeight" placeholder="9"></label>
                    `;
                    break;
            }
        }

        function calculatePerimeter() {
            const shape = document.getElementById('perimShape').value;
            let result = 0;
            let formula = '';
            
            switch(shape) {
                case 'rectangle':
                    const length = parseFloat(document.getElementById('perimLength').value);
                    const width = parseFloat(document.getElementById('perimWidth').value);
                    if (length && width) {
                        result = 2 * (length + width);
                        formula = `2 √ó (${length} + ${width}) = ${result}`;
                    }
                    break;
                case 'square':
                    const side = parseFloat(document.getElementById('perimSide').value);
                    if (side) {
                        result = 4 * side;
                        formula = `4 √ó ${side} = ${result}`;
                    }
                    break;
                case 'triangle':
                    const side1 = parseFloat(document.getElementById('perimSide1').value);
                    const side2 = parseFloat(document.getElementById('perimSide2').value);
                    const side3 = parseFloat(document.getElementById('perimSide3').value);
                    if (side1 && side2 && side3) {
                        result = side1 + side2 + side3;
                        formula = `${side1} + ${side2} + ${side3} = ${result}`;
                    }
                    break;
                case 'circle':
                    const radius = parseFloat(document.getElementById('perimRadius').value);
                    if (radius) {
                        result = 2 * Math.PI * radius;
                        formula = `2 √ó œÄ √ó ${radius} = ${result.toFixed(2)}`;
                        result = result.toFixed(2);
                    }
                    break;
                case 'hexagon':
                    const hexSide = parseFloat(document.getElementById('perimSide').value);
                    if (hexSide) {
                        result = 6 * hexSide;
                        formula = `6 √ó ${hexSide} = ${result}`;
                    }
                    break;
            }
            
            if (result > 0) {
                const resultDiv = document.getElementById('perimResult');
                resultDiv.innerHTML = `üéâ ${formula} meters! üéâ`;
                resultDiv.style.display = 'block';
                celebrateCorrect();
            }
        }

        function calculateArea() {
            const shape = document.getElementById('areaShape').value;
            let result = 0;
            let formula = '';
            
            switch(shape) {
                case 'rectangle':
                    const length = parseFloat(document.getElementById('areaLength').value);
                    const width = parseFloat(document.getElementById('areaWidth').value);
                    if (length && width) {
                        result = length * width;
                        formula = `${length} √ó ${width} = ${result}`;
                    }
                    break;
                case 'square':
                    const side = parseFloat(document.getElementById('areaSide').value);
                    if (side) {
                        result = side * side;
                        formula = `${side}¬≤ = ${result}`;
                    }
                    break;
                case 'triangle':
                    const base = parseFloat(document.getElementById('areaBase').value);
                    const height = parseFloat(document.getElementById('areaHeight').value);
                    if (base && height) {
                        result = 0.5 * base * height;
                        formula = `¬Ω √ó ${base} √ó ${height} = ${result}`;
                    }
                    break;
                case 'circle':
                    const radius = parseFloat(document.getElementById('areaRadius').value);
                    if (radius) {
                        result = Math.PI * radius * radius;
                        formula = `œÄ √ó ${radius}¬≤ = ${result.toFixed(2)}`;
                        result = result.toFixed(2);
                    }
                    break;
                case 'trapezoid':
                    const top = parseFloat(document.getElementById('areaTop').value);
                    const bottom = parseFloat(document.getElementById('areaBottom').value);
                    const trapHeight = parseFloat(document.getElementById('areaHeight').value);
                    if (top && bottom && trapHeight) {
                        result = 0.5 * (top + bottom) * trapHeight;
                        formula = `¬Ω √ó (${top} + ${bottom}) √ó ${trapHeight} = ${result}`;
                    }
                    break;
                case 'lshape':
                    const len1 = parseFloat(document.getElementById('areaLength1').value);
                    const wid1 = parseFloat(document.getElementById('areaWidth1').value);
                    const len2 = parseFloat(document.getElementById('areaLength2').value);
                    const wid2 = parseFloat(document.getElementById('areaWidth2').value);
                    if (len1 && wid1 && len2 && wid2) {
                        const area1 = len1 * wid1;
                        const area2 = len2 * wid2;
                        result = area1 + area2;
                        formula = `(${len1} √ó ${wid1}) + (${len2} √ó ${wid2}) = ${area1} + ${area2} = ${result}`;
                    }
                    break;
            }
            
            if (result > 0) {
                const resultDiv = document.getElementById('areaResult');
                resultDiv.innerHTML = `üéâ ${formula} m¬≤! üéâ`;
                resultDiv.style.display = 'block';
                celebrateCorrect();
            }
        }

        function calculateVolume() {
            const shape = document.getElementById('volumeShape').value;
            let result = 0;
            let formula = '';
            
            switch(shape) {
                case 'rectangular':
                    const length = parseFloat(document.getElementById('volLength').value);
                    const width = parseFloat(document.getElementById('volWidth').value);
                    const height = parseFloat(document.getElementById('volHeight').value);
                    if (length && width && height) {
                        result = length * width * height;
                        formula = `${length} √ó ${width} √ó ${height} = ${result}`;
                    }
                    break;
                case 'cube':
                    const edge = parseFloat(document.getElementById('volEdge').value);
                    if (edge) {
                        result = edge * edge * edge;
                        formula = `${edge}¬≥ = ${result}`;
                    }
                    break;
                case 'cylinder':
                    const cylRadius = parseFloat(document.getElementById('volRadius').value);
                    const cylHeight = parseFloat(document.getElementById('volHeight').value);
                    if (cylRadius && cylHeight) {
                        result = Math.PI * cylRadius * cylRadius * cylHeight;
                        formula = `œÄ √ó ${cylRadius}¬≤ √ó ${cylHeight} = ${result.toFixed(2)}`;
                        result = result.toFixed(2);
                    }
                    break;
                case 'triangular':
                    const triBase = parseFloat(document.getElementById('volBase').value);
                    const triHeight = parseFloat(document.getElementById('volHeight').value);
                    const triLength = parseFloat(document.getElementById('volLength').value);
                    if (triBase && triHeight && triLength) {
                        result = 0.5 * triBase * triHeight * triLength;
                        formula = `¬Ω √ó ${triBase} √ó ${triHeight} √ó ${triLength} = ${result}`;
                    }
                    break;
                case 'sphere':
                    const sphRadius = parseFloat(document.getElementById('volRadius').value);
                    if (sphRadius) {
                        result = (4/3) * Math.PI * sphRadius * sphRadius * sphRadius;
                        formula = `‚Å¥‚ÅÑ‚ÇÉ √ó œÄ √ó ${sphRadius}¬≥ = ${result.toFixed(2)}`;
                        result = result.toFixed(2);
                    }
                    break;
                case 'cone':
                    const coneRadius = parseFloat(document.getElementById('volRadius').value);
                    const coneHeight = parseFloat(document.getElementById('volHeight').value);
                    if (coneRadius && coneHeight) {
                        result = (1/3) * Math.PI * coneRadius * coneRadius * coneHeight;
                        formula = `‚Öì √ó œÄ √ó ${coneRadius}¬≤ √ó ${coneHeight} = ${result.toFixed(2)}`;
                        result = result.toFixed(2);
                    }
                    break;
            }
            
            if (result > 0) {
                const resultDiv = document.getElementById('volResult');
                resultDiv.innerHTML = `üéâ ${formula} m¬≥! üéâ`;
                resultDiv.style.display = 'block';
                celebrateCorrect();
            }
        }

        // Quiz functions
        function checkAnswer(element, isCorrect) {
            const options = element.parentElement.children;
            
            // Disable all options
            Array.from(options).forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            if (isCorrect) {
                element.classList.add('correct');
                showEncouragement(['üéâ Excellent!', 'üåü Perfect!', 'üèÜ Amazing!', 'üéä Fantastic!']);
                celebrateCorrect();
            } else {
                element.classList.add('incorrect');
                // Show correct answer
                Array.from(options).forEach(option => {
                    if (option !== element && !option.classList.contains('incorrect')) {
                        setTimeout(() => option.classList.add('correct'), 500);
                    }
                });
                showEncouragement(['ü§î Try again!', 'üí™ Keep learning!', 'üåà Almost there!']);
            }
        }

        // Enhanced quiz functions
        const perimeterQuestions = [
            {
                question: "Thunder's square stable has sides of 8m. What's the perimeter?",
                options: ["16m", "32m", "24m", "64m"],
                correct: 1
            },
            {
                question: "A triangular training area has sides of 10m, 12m, and 14m. What's the perimeter?",
                options: ["36m", "26m", "30m", "42m"],
                correct: 0
            },
            {
                question: "Spirit's circular pen has a radius of 5m. What's the perimeter? (œÄ = 3.14)",
                options: ["31.4m", "15.7m", "20m", "25m"],
                correct: 0
            },
            {
                question: "A regular hexagon arena has sides of 6m each. What's the perimeter?",
                options: ["24m", "30m", "36m", "42m"],
                correct: 2
            }
        ];

        const areaQuestions = [
            {
                question: "Spirit's square pen has an area of 64m¬≤. What's the length of each side?",
                options: ["8m", "16m", "32m", "4m"],
                correct: 0
            },
            {
                question: "A triangular field has base 12m and height 8m. What's the area?",
                options: ["48m¬≤", "96m¬≤", "20m¬≤", "24m¬≤"],
                correct: 0
            },
            {
                question: "A circular arena has radius 10m. What's the area? (œÄ = 3.14)",
                options: ["314m¬≤", "62.8m¬≤", "100m¬≤", "628m¬≤"],
                correct: 0
            },
            {
                question: "A trapezoid pasture has top 8m, bottom 12m, height 5m. What's the area?",
                options: ["50m¬≤", "40m¬≤", "60m¬≤", "100m¬≤"],
                correct: 0
            }
        ];

        const volumeQuestions = [
            {
                question: "A cube-shaped feed container has edges of 4m. What's its volume?",
                options: ["16m¬≥", "48m¬≥", "64m¬≥", "12m¬≥"],
                correct: 2
            },
            {
                question: "A cylindrical water tank has radius 3m and height 6m. What's the volume? (œÄ = 3.14)",
                options: ["169.56m¬≥", "56.52m¬≥", "18m¬≥", "36m¬≥"],
                correct: 0
            },
            {
                question: "A triangular prism shelter has base 8m, height 6m, length 10m. What's the volume?",
                options: ["240m¬≥", "480m¬≥", "120m¬≥", "80m¬≥"],
                correct: 0
            },
            {
                question: "A spherical exercise ball has radius 1.5m. What's the volume? (œÄ = 3.14)",
                options: ["14.13m¬≥", "28.26m¬≥", "7.065m¬≥", "21.2m¬≥"],
                correct: 0
            }
        ];

        function generatePerimeterQuiz() {
            const randomQ = perimeterQuestions[Math.floor(Math.random() * perimeterQuestions.length)];
            document.getElementById('perimQuizQuestion').innerHTML = randomQ.question;
            
            const optionsContainer = document.getElementById('perimQuizOptions');
            optionsContainer.innerHTML = '';
            
            randomQ.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.innerHTML = option;
                optionDiv.onclick = () => checkAnswer(optionDiv, index === randomQ.correct);
                optionsContainer.appendChild(optionDiv);
            });
        }

        function generateAreaQuiz() {
            const randomQ = areaQuestions[Math.floor(Math.random() * areaQuestions.length)];
            document.getElementById('areaQuizQuestion').innerHTML = randomQ.question;
            
            const optionsContainer = document.getElementById('areaQuizOptions');
            optionsContainer.innerHTML = '';
            
            randomQ.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.innerHTML = option;
                optionDiv.onclick = () => checkAnswer(optionDiv, index === randomQ.correct);
                optionsContainer.appendChild(optionDiv);
            });
        }

        function generateVolumeQuiz() {
            const randomQ = volumeQuestions[Math.floor(Math.random() * volumeQuestions.length)];
            document.getElementById('volumeQuizQuestion').innerHTML = randomQ.question;
            
            const optionsContainer = document.getElementById('volumeQuizOptions');
            optionsContainer.innerHTML = '';
            
            randomQ.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.innerHTML = option;
                optionDiv.onclick = () => checkAnswer(optionDiv, index === randomQ.correct);
                optionsContainer.appendChild(optionDiv);
            });
        }

        // Memory game functions
        function initializeMemoryGame() {
            const cards = [
                'P = 2√ó(l+w)', 'Rectangle Perimeter',
                'A = l√ów', 'Rectangle Area',
                'V = l√ów√óh', 'Rectangular Prism',
                'A = s¬≤', 'Square Area',
                'V = e¬≥', 'Cube Volume',
                'A = ¬Ω√ób√óh', 'Triangle Area',
                'A = œÄ√ór¬≤', 'Circle Area',
                'V = œÄ√ór¬≤√óh', 'Cylinder Volume'
            ];

            const gameContainer = document.getElementById('memoryGame');
            gameContainer.innerHTML = '';

            // Shuffle cards
            const shuffled = cards.sort(() => Math.random() - 0.5);

            shuffled.forEach((card, index) => {
                const cardElement = document.createElement('button');
                cardElement.className = 'memory-card';
                cardElement.innerHTML = '?';
                cardElement.dataset.value = card;
                cardElement.dataset.index = index;
                cardElement.onclick = () => flipCard(cardElement);
                gameContainer.appendChild(cardElement);
            });
        }

        function flipCard(card) {
            if (card.classList.contains('flipped') || card.classList.contains('matched')) return;
            if (memoryFlippedCards.length >= 2) return;

            card.classList.add('flipped');
            card.innerHTML = card.dataset.value;
            memoryFlippedCards.push(card);

            if (memoryFlippedCards.length === 2) {
                memoryTries++;
                setTimeout(checkMemoryMatch, 1000);
            }
        }

        function checkMemoryMatch() {
            const [card1, card2] = memoryFlippedCards;
            const matches = [
                ['P = 2√ó(l+w)', 'Rectangle Perimeter'],
                ['A = l√ów', 'Rectangle Area'],
                ['V = l√ów√óh', 'Rectangular Prism'],
                ['A = s¬≤', 'Square Area'],
                ['V = e¬≥', 'Cube Volume'],
                ['A = ¬Ω√ób√óh', 'Triangle Area'],
                ['A = œÄ√ór¬≤', 'Circle Area'],
                ['V = œÄ√ór¬≤√óh', 'Cylinder Volume']
            ];

            const isMatch = matches.some(([formula, shape]) => 
                (card1.dataset.value === formula && card2.dataset.value === shape) ||
                (card1.dataset.value === shape && card2.dataset.value === formula)
            );

            if (isMatch) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                memoryMatches++;
                celebrateCorrect();
            } else {
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                card1.innerHTML = '?';
                card2.innerHTML = '?';
            }

            memoryFlippedCards = [];
            updateMemoryScore();
        }

        // Quick quiz functions
        const allQuizQuestions = [
            {
                question: "A horse pen is 12m long and 8m wide. What's the perimeter?",
                options: ["40m", "96m", "20m", "32m"],
                correct: 0
            },
            {
                question: "A square stable has a perimeter of 24m. What's the area?",
                options: ["36m¬≤", "6m¬≤", "144m¬≤", "24m¬≤"],
                correct: 0
            },
            {
                question: "A feed room is 6m√ó4m√ó3m. What's the volume?",
                options: ["72m¬≥", "48m¬≥", "24m¬≥", "36m¬≥"],
                correct: 0
            },
            {
                question: "A circular arena has radius 8m. What's the perimeter? (œÄ = 3.14)",
                options: ["50.24m", "25.12m", "16m", "32m"],
                correct: 0
            },
            {
                question: "A triangular field has base 10m and height 6m. What's the area?",
                options: ["30m¬≤", "60m¬≤", "16m¬≤", "20m¬≤"],
                correct: 0
            },
            {
                question: "A cylinder silo has radius 4m and height 10m. What's the volume? (œÄ = 3.14)",
                options: ["502.4m¬≥", "251.2m¬≥", "40m¬≥", "160m¬≥"],
                correct: 0
            }
        ];

        function generateQuizQuestion() {
            const randomQ = allQuizQuestions[Math.floor(Math.random() * allQuizQuestions.length)];
            document.getElementById('quizQuestion').innerHTML = randomQ.question;
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            randomQ.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.innerHTML = option;
                optionDiv.onclick = () => checkQuizAnswer(optionDiv, index === randomQ.correct);
                optionsContainer.appendChild(optionDiv);
            });
        }.contains('flipped') || card.classList.contains('matched')) return;
            if (memoryFlippedCards.length >= 2) return;

            card.classList.add('flipped');
            card.innerHTML = card.dataset.value;
            memoryFlippedCards.push(card);

            if (memoryFlippedCards.length === 2) {
                memoryTries++;
                setTimeout(checkMemoryMatch, 1000);
            }
        }

        function checkMemoryMatch() {
            const [card1, card2] = memoryFlippedCards;
            const isMatch = (
                (card1.dataset.value === 'P = 2√ó(l+w)' && card2.dataset.value === 'Rectangle Perimeter') ||
                (card1.dataset.value === 'Rectangle Perimeter' && card2.dataset.value === 'P = 2√ó(l+w)') ||
                (card1.dataset.value === 'A = l√ów' && card2.dataset.value === 'Rectangle Area') ||
                (card1.dataset.value === 'Rectangle Area' && card2.dataset.value === 'A = l√ów') ||
                (card1.dataset.value === 'V = l√ów√óh' && card2.dataset.value === 'Volume') ||
                (card1.dataset.value === 'Volume' && card2.dataset.value === 'V = l√ów√óh') ||
                (card1.dataset.value === 'A = s¬≤' && card2.dataset.value === 'Square Area') ||
                (card1.dataset.value === 'Square Area' && card2.dataset.value === 'A = s¬≤')
            );

            if (isMatch) {
                card1.classList.add('matched');
                card2.classList.add('matched');
                memoryMatches++;
                celebrateCorrect();
            } else {
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                card1.innerHTML = '?';
                card2.innerHTML = '?';
            }

            memoryFlippedCards = [];
            updateMemoryScore();
        }

        function updateMemoryScore() {
            document.getElementById('memoryScore').innerHTML = `Matches: ${memoryMatches} | Tries: ${memoryTries}`;
        }

        function resetMemoryGame() {
            memoryMatches = 0;
            memoryTries = 0;
            memoryFlippedCards = [];
            updateMemoryScore();
            initializeMemoryGame();
        }

        // Quick quiz functions
        const quizQuestions = [
            {
                question: "A horse pen is 12m long and 8m wide. What's the perimeter?",
                options: ["40m", "96m", "20m", "32m"],
                correct: 0
            },
            {
                question: "A square stable has a perimeter of 24m. What's the area?",
                options: ["36m¬≤", "6m¬≤", "144m¬≤", "24m¬≤"],
                correct: 0
            },
            {
                question: "A feed room is 6m√ó4m√ó3m. What's the volume?",
                options: ["72m¬≥", "48m¬≥", "24m¬≥", "36m¬≥"],
                correct: 0
            }
        ];

        function generateQuizQuestion() {
            const randomQ = quizQuestions[Math.floor(Math.random() * quizQuestions.length)];
            document.getElementById('quizQuestion').innerHTML = randomQ.question;
            
            const optionsContainer = document.getElementById('quizOptions');
            optionsContainer.innerHTML = '';
            
            randomQ.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'option';
                optionDiv.innerHTML = option;
                optionDiv.onclick = () => checkQuizAnswer(optionDiv, index === randomQ.correct);
                optionsContainer.appendChild(optionDiv);
            });
        }

        function checkQuizAnswer(element, isCorrect) {
            const options = element.parentElement.children;
            Array.from(options).forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            if (isCorrect) {
                element.classList.add('correct');
                currentScore++;
                celebrateCorrect();
            } else {
                element.classList.add('incorrect');
            }
            
            currentQuestion++;
            updateQuizScore();
        }

        function updateQuizScore() {
            document.getElementById('quizScore').innerHTML = `Score: ${currentScore} | Question: ${currentQuestion}`;
        }

        // Animation functions
        function animatePerimeter(element) {
            element.style.border = '5px solid #FF6B6B';
            element.innerHTML = '<div class="shape-info">Measuring around the edge!<br>P = 2√ó(l+w)</div>';
            
            setTimeout(() => {
                element.style.border = '3px solid #2196F3';
                element.innerHTML = '<div class="shape-info">Click me to see perimeter!</div>';
            }, 2000);
        }

        function celebrateCorrect() {
            // Add some celebration animation
            document.body.style.background = 'linear-gradient(135deg, #FFD700 0%, #FF69B4 100%)';
            setTimeout(() => {
                document.body.style.background = 'linear-gradient(135deg, #87CEEB 0%, #90EE90 100%)';
            }, 500);
        }

        function showEncouragement(messages) {
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            document.getElementById('encouragement').innerHTML = randomMessage;
        }

        // Initialize games when page loads
        window.onload = function() {
            initializeMemoryGame();
            generateQuizQuestion();
            
            // Set up rotating encouragement messages
            const encouragements = [
                'üåü You\'re doing amazing! Keep practicing! üåü',
                'üèá Math is like riding - practice makes perfect! üèá',
                'üêé Every horse started with one step! Keep going! üêé',
                'üéä Learning is fun when you\'re having fun! üéä'
            ];
            
            setInterval(() => {
                const randomMsg = encouragements[Math.floor(Math.random() * encouragements.length)];
                document.getElementById('encouragement').innerHTML = randomMsg;
            }, 5000);
        };
    </script>
</body>
</html>
